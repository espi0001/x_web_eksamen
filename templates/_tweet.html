<div id="post_container_{{ tweet.post_pk }}">
    {% if user.user_admin %}
    {% include "___block_unblock_post.html" %}
    {% endif %}



    <div class="post_container">
        {% if tweet.post_is_blocked %}
        <div class="blocked_post_overlay">
            <p>{{ lans("this_post_is_blocked") }}</p>
        </div>
        {% endif %}

        <article class="post">
            <img src="{{ tweet.user_avatar_path | avatar }}" alt="Avatar" class="w-8 h-8 rounded-full">

            <div class="post-content">
                <div class="post-header">
                    <span class="name">
                        {{ tweet.user_name }}
                    </span>
                    <span class="handle">@{{ tweet.user_username }}</span> ·
                    <span class="time">1d</span> <!-- TODO: Add timestamp + translate -->

                    <!-- edit knap > vises kun på brugerens egne posts -->
                    {% if user.user_pk == tweet.post_user_fk %}
                    <button class="edit-post-btn" mix-get="/edit-post/{{ tweet.post_pk }}"
                        title="{{ lans('edit_post') }}">
                        <i class="fa-solid fa-pen pointer-e-none"></i>
                    </button>
                    {% endif %}
                </div>

                <p class="text">{{ tweet.post_message }}</p>
                
                <!-- Question: Jeg tror der er fejl her -->
                <!-- Media display  -->
                {% if tweet.post_media_path %}
                {% set file_ext = tweet.post_media_path.split('.')[-1].lower() %}

                {% if file_ext in ['jpg', 'jpeg', 'png', 'gif', 'webp'] %}
                <!-- Display image -->
                <img src="{{ url_for('static', filename=tweet.post_media_path) }}" alt="Post image" class="post-media">

                {% elif file_ext in ['mp4', 'mov', 'webm'] %}
                <!-- Display video -->
                <video controls class="post-media">
                    <source src="{{ url_for('static', filename=tweet.post_media_path) }}" type="video/{{ file_ext }}">
                    {{ lans("video_not_supported") }}
                </video>
                {% endif %}
                {% endif %}
                <!-- TODO: Jeg tror der er fejl her -->
                

                <div class="post-actions">
                    <!-- Comment -->
                    <span class="action comment">
                        <a href="/single-post/{{ tweet.post_pk }}" mix-get>
                            <i class="fa-regular fa-comment"></i> 
                            {% if tweet.post_total_comments > 0 %}
                                <span>{{ tweet.post_total_comments }}</span>
                            {% endif %}
                        </a>
                    </span>

                    <span class="action"><i class="fa-solid fa-retweet"></i> </span>
                    
                    <!-- Like -->
                    <span class="action">
                        {% if tweet.liked_by_user %}
                        {% include "___button_unlike_tweet.html" %}
                        {% else %}
                        {% include "___button_like_tweet.html" %}
                        {% endif %}
                    </span>

                    <!-- Bookmark -->
                    <span class="action">
                        {% if tweet.bookmarked_by_user %}
                        {% include "___button_unbookmark_tweet.html" %}
                        {% else %}
                        {% include "___button_bookmark_tweet.html" %}
                        {% endif %}
                    </span>
                    <span class="action"><i class="fa-solid fa-share"></i></span>


                    {% if user and user.user_pk == tweet.post_user_fk %}
                    <form action="/api-delete-post/{{ tweet.post_pk }}" mix-delete style="display:inline" class="action"
                        mix-delay="1000" mix-await="{{ lans('deleting_post') }}...">
                        <button type="submit" class="action text-c-red" class="text-c-red" hover="cursor-pointer">
                            <i class="fa-solid fa-trash"></i>
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </article>
        <div>

        </div>
    </div>
</div>